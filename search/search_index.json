{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to Anton Latukha's place \u00b6 Primer purpose of this site, for now, is to host my bio . I have a lot of notes and personal documentation of somewhat high tech value and plan to release it in form of theme posts.","title":"Home"},{"location":"#welcome-to-anton-latukhas-place","text":"Primer purpose of this site, for now, is to host my bio . I have a lot of notes and personal documentation of somewhat high tech value and plan to release it in form of theme posts.","title":"Welcome to Anton Latukha's place"},{"location":"2017-04-12.-SaltStack-Formulas-install/","text":"SaltStack formulas presetup/install/testing/usage \u00b6 Look through docs briefly \u00b6 Official Doc (not so great, but useful) Installation \u00b6 Prepare Salt formulas \u00b6 Fork what you want from salt formulas . Why? Because official documentation points to it, but also unconditionally requires . Create a branch in formulas \u00b6 Correspond to your environment ('base' in my setup): 1 2 3 4 git clone formula git cd formula git checkout -b 'base' git push origin 'base' Install Git Backend in Python \u00b6 Need to use deprecated Dulwich on Arch. preferred pygit2 is installed, but was not working on Arch. Officail notes: installing-dependencies . In Arch Linux: 1 yaourt -Syu python2-dulwich Or use PIP install: 1 pip install pygit2 1 pip install gitpython 1 pip install dulwich Enable Salt to use GIT backend \u00b6 1 2 3 4 5 /etc/salt/master --- fileserver_backend : - git - roots These list going to be searched through in listed order. More at: section on fileserver backends . Enable formula remote repos \u00b6 1 2 3 4 /etc/salt/master --- gitfs_remotes : - https://github.com/saltstack-formulas/docker-formula.git Reference information: You add that as remote repository of formulas. official doc This is basically works as literal remote fs. official doc Official documentation has an error \u00b6 Bug Be sure to put '.git' at the end of GIT URLs . Salt requires them to parse links with python backends. Formulas usage \u00b6 To use formulas: \u00b6 in sls file 1 2 3 * .sls --- - docker or 1 2 3 * .sls --- docker : to install formula using docker-formula. Look at GitHub documentation of formulas to see how to do install with it and other actions. Name of formula does not required to correspond to install command. Like here . To overload formula: \u00b6 You can extend formulas or use their source. To include formula source in sls (you can overload, like docker.sls) 1 2 3 4 docker.sls --- include : - docker Here docker-formula source included in docker.sls, and add your commands, formulas and so on. That is called overload. Testing \u00b6 Check if SaltStack formula works \u00b6 1 sudo salt 'host' state.show_sls docker To debug Master \u00b6 1 sudo salt-master -l debug If you get: [CRITICAL] No suitable gitfs provider module is installed. \u00b6 SaltStack can not find python git backend (pygit2, GitPython or Dulwich). So you need to figure-out this. Look at Docker state module \u00b6 https://docs.saltstack.com/en/latest/ref/states/all/salt.states.dockerng.html#module-salt.states.dockerng","title":"2017-04-12. SaltStack formulas"},{"location":"2017-04-12.-SaltStack-Formulas-install/#saltstack-formulas-presetupinstalltestingusage","text":"","title":"SaltStack formulas presetup/install/testing/usage"},{"location":"2017-04-12.-SaltStack-Formulas-install/#look-through-docs-briefly","text":"Official Doc (not so great, but useful)","title":"Look through docs briefly"},{"location":"2017-04-12.-SaltStack-Formulas-install/#installation","text":"","title":"Installation"},{"location":"2017-04-12.-SaltStack-Formulas-install/#prepare-salt-formulas","text":"Fork what you want from salt formulas . Why? Because official documentation points to it, but also unconditionally requires .","title":"Prepare Salt formulas"},{"location":"2017-04-12.-SaltStack-Formulas-install/#create-a-branch-in-formulas","text":"Correspond to your environment ('base' in my setup): 1 2 3 4 git clone formula git cd formula git checkout -b 'base' git push origin 'base'","title":"Create a branch in formulas"},{"location":"2017-04-12.-SaltStack-Formulas-install/#install-git-backend-in-python","text":"Need to use deprecated Dulwich on Arch. preferred pygit2 is installed, but was not working on Arch. Officail notes: installing-dependencies . In Arch Linux: 1 yaourt -Syu python2-dulwich Or use PIP install: 1 pip install pygit2 1 pip install gitpython 1 pip install dulwich","title":"Install Git Backend in Python"},{"location":"2017-04-12.-SaltStack-Formulas-install/#enable-salt-to-use-git-backend","text":"1 2 3 4 5 /etc/salt/master --- fileserver_backend : - git - roots These list going to be searched through in listed order. More at: section on fileserver backends .","title":"Enable Salt to use GIT backend"},{"location":"2017-04-12.-SaltStack-Formulas-install/#enable-formula-remote-repos","text":"1 2 3 4 /etc/salt/master --- gitfs_remotes : - https://github.com/saltstack-formulas/docker-formula.git Reference information: You add that as remote repository of formulas. official doc This is basically works as literal remote fs. official doc","title":"Enable formula remote repos"},{"location":"2017-04-12.-SaltStack-Formulas-install/#official-documentation-has-an-error","text":"Bug Be sure to put '.git' at the end of GIT URLs . Salt requires them to parse links with python backends.","title":"Official documentation has an error"},{"location":"2017-04-12.-SaltStack-Formulas-install/#formulas-usage","text":"","title":"Formulas usage"},{"location":"2017-04-12.-SaltStack-Formulas-install/#to-use-formulas","text":"in sls file 1 2 3 * .sls --- - docker or 1 2 3 * .sls --- docker : to install formula using docker-formula. Look at GitHub documentation of formulas to see how to do install with it and other actions. Name of formula does not required to correspond to install command. Like here .","title":"To use formulas:"},{"location":"2017-04-12.-SaltStack-Formulas-install/#to-overload-formula","text":"You can extend formulas or use their source. To include formula source in sls (you can overload, like docker.sls) 1 2 3 4 docker.sls --- include : - docker Here docker-formula source included in docker.sls, and add your commands, formulas and so on. That is called overload.","title":"To overload formula:"},{"location":"2017-04-12.-SaltStack-Formulas-install/#testing","text":"","title":"Testing"},{"location":"2017-04-12.-SaltStack-Formulas-install/#check-if-saltstack-formula-works","text":"1 sudo salt 'host' state.show_sls docker","title":"Check if SaltStack formula works"},{"location":"2017-04-12.-SaltStack-Formulas-install/#to-debug-master","text":"1 sudo salt-master -l debug","title":"To debug Master"},{"location":"2017-04-12.-SaltStack-Formulas-install/#if-you-get-critical-no-suitable-gitfs-provider-module-is-installed","text":"SaltStack can not find python git backend (pygit2, GitPython or Dulwich). So you need to figure-out this.","title":"If you get: [CRITICAL] No suitable gitfs provider module is installed."},{"location":"2017-04-12.-SaltStack-Formulas-install/#look-at-docker-state-module","text":"https://docs.saltstack.com/en/latest/ref/states/all/salt.states.dockerng.html#module-salt.states.dockerng","title":"Look at Docker state module"},{"location":"2017-04-14.-How-to-setup-proxy-to-listen-Spotify/","text":"How to create proxy for Spotify \u00b6 Interlude \u00b6 (For fast read, look at Main content ) As you probably already faced, many things not available in different countries. As also Spotify. So you are thinking how to create proxy for yourself, to stream Spotify traffic through it. That mean you are probably a sort of technician. And probably logged in to servers in your life. So you probably used SSH. But SSH is mush more than you think it is. Main content \u00b6 To create a SOCKS5 Proxy server with SSH: ssh [-p remote_port ] -D local_port_to_bind_to [ remote_user @] remote_mashine and that is all. Detailed description \u00b6 -p remote_port - if you have not standard port for SSH; -D local_port_to_bind_to - must be not \"well known\" and not already used port (pick just a random port above ~1024, like 8888 or 9999, up to 32000); remote_mashine - domain name or IP address; SSH is going to create local socket for that port. And going to pipe through SSH tunnel all traffic that arrived at that port to the remote host. So traffic going to go from that host IP to the Internet. So yes, you: need some remote host in the country that has service open. USA is the safe bet. As a tech guy, you can hold a host somewhere already, or ask some friend to pass audio traffic, it is not much. You not even need a root privileges on server to do that. You can do that as a regular user. Client configuration \u00b6 Is very straight-forward. Good luck to you. And happy listening.","title":"2017-04-14. How to setup proxy to listen Spotify"},{"location":"2017-04-14.-How-to-setup-proxy-to-listen-Spotify/#how-to-create-proxy-for-spotify","text":"","title":"How to create proxy for Spotify"},{"location":"2017-04-14.-How-to-setup-proxy-to-listen-Spotify/#interlude","text":"(For fast read, look at Main content ) As you probably already faced, many things not available in different countries. As also Spotify. So you are thinking how to create proxy for yourself, to stream Spotify traffic through it. That mean you are probably a sort of technician. And probably logged in to servers in your life. So you probably used SSH. But SSH is mush more than you think it is.","title":"Interlude"},{"location":"2017-04-14.-How-to-setup-proxy-to-listen-Spotify/#main-content","text":"To create a SOCKS5 Proxy server with SSH: ssh [-p remote_port ] -D local_port_to_bind_to [ remote_user @] remote_mashine and that is all.","title":"Main content"},{"location":"2017-04-14.-How-to-setup-proxy-to-listen-Spotify/#detailed-description","text":"-p remote_port - if you have not standard port for SSH; -D local_port_to_bind_to - must be not \"well known\" and not already used port (pick just a random port above ~1024, like 8888 or 9999, up to 32000); remote_mashine - domain name or IP address; SSH is going to create local socket for that port. And going to pipe through SSH tunnel all traffic that arrived at that port to the remote host. So traffic going to go from that host IP to the Internet. So yes, you: need some remote host in the country that has service open. USA is the safe bet. As a tech guy, you can hold a host somewhere already, or ask some friend to pass audio traffic, it is not much. You not even need a root privileges on server to do that. You can do that as a regular user.","title":"Detailed description"},{"location":"2017-04-14.-How-to-setup-proxy-to-listen-Spotify/#client-configuration","text":"Is very straight-forward. Good luck to you. And happy listening.","title":"Client configuration"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/","text":"Restore of deleted LVM (Advanced) \u00b6 Note Case of bare static filesystems restoring is much more trivial. Look for \"TestDisc\" . Intro On the whole Internet there is no information on how to restore LVM, when no backup was present. Do backups. But sometimes someone may fall like I fell and need to restore LVM no matter what. I had backups of main information, but not full backup of the system (or at least GPT/MBR parts in this case). And I learned from that mistake. I decided to try to restore full system as a whole, to save effort and time. Because I thought it through and found almost universal solution to restore LVM. On multiple drives - you must do Analyze and Restore for all drives involved. I plan further to release in depth article on Backups. So one way or another. Boot-sector and partition table are deleted from drive. If only first sectors was erased, it is great. If you did classic: 1 2 3 dd if = /dev/zero of = /dev/ { h,p,s } d [ a..x ] bs = 512 count = 1 # Watch your paste to root prompt! # Like: # dd if=/dev/zero of=/dev/sda bs=512 count=1 # Watch-out this command! Instead of doing the opposite - the backups of first sectors. Backup GPT \u00b6 1 sgdisk -b = /path/to/backup/drive-sgdisk.bak /path/to/device Backup MBR \u00b6 1 2 3 dd if = /dev/ [ hps ] d [ a-x ] of = /backup/ [ hps ] d [ a-x ] bs = 512 count = 1 # Like: # dd if='/dev/sda of=/backup/'`date --iso`'. sda' bs=512 count=1 LVM \u00b6 LVM complicates task of recovery, because it is basically a dynamically shifting layer between physical drives partitions and filesystems. Deleting LVM info - you are basically lock your filesystems in a chaos box you can not penetrate. There is small info on Internet on how to resurrect your true HDD/SDD LVM friend(s) alive. But check it out anyway. We are going to do black magic. If you understand LVM in depth. LVM dynamically allocates physical space pieces (Physical extent (PE)). Physical extent (PE) The smallest size in the physical volume that can be assigned to a logical volume (default 4MiB)) This is one of main facts here. Second fact - like most disc solutions - LVM does not shrink by itself. We can do that process, if we want. But LVM, by itself, only expands. Third fact - LVM does not move Physical extents (PE) around, they are statically placed. They allocated from free pool, given to Logical volume (LV), written in it info and that is it. But now you see. LVM is a array of Physical extent (PE), and they was allocated and information stored on them is a complete chaos to us and to tools of recovery (they does not support LVM). That is why it seems impossible to resurrect for most people. But with dedication, way is described here. More info on LVM \u00b6 LVM maps Physical volumes (PV), to Volume groups (VG). Physical volume (PV) Partition on hard disk (or even the disk itself or loopback file) on which you can have volume groups. It has a special header and is divided into physical extents. Think of physical volumes as big building blocks used to build your hard drive. Volume group (VG) Group of physical volumes used as a storage volume (as one disk). They contain logical volumes. Think of volume groups as hard drives. On Volume group (VG) you can describe a Logical volume (LV). Logical volume (LV) A \"virtual/logical partition\" that resides in a volume group and is composed of physical extents. Think of logical volumes as normal partitions. And when Logical volume is going to need to expand its physical space, it does this by getting Physical extent (PE) and mapping it to Logical extent (LE) units, that then LVM includes to Logical volume (LV). It can expand until reaching quota, or free Volume group space available. Logical extent (LE) units are additional abstraction for mapping LVM RAID PEs or PEs from different drives to single Logical volume. Explaining the idea \u00b6 Besides corner stones described in LVM , next piece also plays as important part. Not so known fact, LVM does a backups of it's work information. In /etc/lvm/backup it stores last backup. In /etc/lvm/archive lays a history of previous backup versions. But it is a backup inside the filesystem we trying to restore. Here comes a dirty magic I was talking about. If only we could revive LVM to any metadata state (even non-consistent), than almost certainly we can expect to get the hold of that /etc/lvm/backup . And it going to shine a lite on us. TestDisc can find LVM partition remains, but TestDisc doesn't support work with LVM. It only can say: it looks like some version of LVM table. So TestDisc can't somehow find for us, what version of LVM structure it restores (old or last one), and how consistent that LVM data is. So idea is. To revive the largest LVM TestDisc can find (probably the latest one, because LVM only expands most of the time and LVM PE data is static), and then chroot to that somewhat alive filesystem from working system and restore /etc/lvm/backup . Process of restoring \u00b6 Tip For LVM on multiple drives - you must do Analyze and Restore for all drives involved. After that next step - recovery - is going to be successful. Connect the drive to working system or boot from Live image that is compatible with distribution that you restore. Example As I used Arch Linux on that machine, I used Arch based Antergos Live image. DD-t ISO on a flash drive. Antergos image has X11, Desktop Environment and Gparted prettiness. Install (update) lvm2 and testdisk . LVM2 as you guess provide LVM support. TestDisk is magical but not intuitive tool. Backup full device \u00b6 Backup at least what is on the drive: 1 ddrescue -v -f -n /path/to/drive /backup/path /backup/path/rescue.log Because the process is somewhat nontrivial, long and uses a hack in it. Note ddrescue output can't be archived on the fly . If you need compression - use filesystem level compression on the backup media. Choose right partition table \u00b6 Choose here right type of the partition. It is up to your research. Probably you have one of: [EFI GPT], [Mac ], [Intel ] . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - Hitachi HDS721010CLA330 Please select the partition table type, press Enter when done. [Intel ] Intel/PC partition >[EFI GPT] EFI GPT partition map (Mac i386, some x86_64...) [Humax ] Humax partition table [Mac ] Apple partition map [None ] Non partitioned media [Sun ] Sun Solaris partition [XBox ] XBox partition [Return ] Return to disk selection Hint: Intel partition table type has been detected. Note: Do NOT select 'None' for media with only a single partition. It's very rare for a disk to be 'Non-partitioned'. Analyze of the system (long operation) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - Hitachi HDS721010CLA330 CHS 121601 255 63 - sector size=512 >[ Analyse ] Analyse current partition structure and search for lost partitions [ Advanced ] Filesystem Utils [ Geometry ] Change disk geometry [ Options ] Modify options [ MBR Code ] Write TestDisk MBR code to first sector [ Delete ] Delete all data in the partition table [ Quit ] Return to disk selection Note Correct disk geometry is required for a successful recovery. 'Analyse' process may give some warnings if it thinks the logical geometry is mismatched. 1 2 3 4 5 6 7 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - CHS 121601 255 63 Partition Start End Size in sectors >P Linux LVM 0 32 33 121601 90 25 1953523712 1 2 3 4 5 6 7 8 9 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - CHS 121601 255 63 Partition Start End Size in sectors 1 P Linux LVM 0 32 33 121601 90 25 1953523712 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - CHS 121601 255 63 Analyse cylinder 553/121600: 00% Linux LVM 0 32 33 121601 80 63 1953523120 Linux 0 65 2 13 0 51 204800 Linux 0 64 63 13 0 49 204800 Linux 0 64 63 13 0 49 204800 Linux 0 64 63 13 0 49 204800 Linux 0 64 63 13 0 49 204800 Linux 0 64 63 13 0 49 204800 Linux 13 0 52 3276 138 62 52428800 Stop Restoring LVM partition with TestDisc \u00b6 After that scan TestDisc review several partitions to restore. One of which is LVM. And it says drive is to small (1T<1.3T or something like that) to reincarnate all that partitions. So you restore the LVM partition (the biggest). Warning At this stage partition and filesystem can be in inconsistent state. Minimize writing to system and proceed further. Restore from backup is going to get us consistent filesystem. Rebooting system \u00b6 To refresh drive boot-partition information - reboot after restoring. Checking state \u00b6 After reboot while doing: 1 2 3 4 5 6 7 8 9 10 11 [antergos@ant-16.9 etc]$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0 0 931.5G 0 disk sda1 8:1 0 931.5G 0 part archvg-boot 254:0 0 100M 0 lvm archvg-archroot 254:1 0 25G 0 lvm /mnt/etc archvg-archvar 254:2 0 15G 0 lvm /run/media/antergos/244907d8-7c9f- archvg-swap 254:3 0 8G 0 lvm archvg-vault 254:4 0 800G 0 lvm archvg-crypt 254:5 0 1G 0 lvm archvg-archhome 254:6 0 20G 0 lvm /run/media/antergos/e2d59443-1e66- You began to see: 1 2 3 [antergos@ant-16.9 etc]$ sudo vgscan Reading volume groups from cache. Found volume group \"archvg\" using metadata type lvm2 Restoring from backup \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 sudo -s # Change volume group attribute to activated vgchange -ay archvg mkdir /mnt/root/ # We need to mount only partition that has backup mount /dev/disk/by-id/archvg-root /mnt/root/ # Locate/print block device attributes blkid /dev/sda1 # /dev/sda1: UUID=\"7SFaGJ-LKnf-mlx7-m8dY-1bg4-epWM-09y8vR\" TYPE=\"LVM2_member\" # Investigate backup. Compare with information above cat /mnt/root/etc/lvm/backup/archvg # Restore volume group configuration vgcfgrestore -f /mnt/root/etc/lvm/backup/archvg archvg #Metadata Restored Next reboot \u00b6 Reboot. After that, if you try to boot to recovered system, - you can get error: 1234F: Because no bootloader was configured. Now we need boot from Live image once more. (optional) Make partition bootable \u00b6 If you was booting from LVM. Mark partition bootable (that flag was in old boot-sector, as you know old-one went away). sudo gparted . Right click on partition. Flags. \"boot\". Mounting everything on working system (preparing for chroot) \u00b6 Now you need by yourself mount all LVM volumes to single tree in /mnt/root, exactly how it was on that system. Because your LVM config is unique, as also mine, I can't give you literal instructions. Example I going to mount: 1 2 3 4 5 6 archvg-archroot /mnt/root/ archvg-boot /mnt/root/boot archvg-archvar /mnt/root/var archvg-archhome /mnt/root/home archvg-vault /mnt/root/mnt/vault archvg-crypt /mnt/root/mnt/crypt So I did: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 sudo -s mkdir -p /mnt/root/ mount /dev/disk/by-id/dm-name-archvg-archroot /mnt/root/ mkdir -p /mnt/root/boot mount /dev/disk/by-id/dm-name-archvg-boot /mnt/root/boot mkdir -p /mnt/root/var mount /dev/disk/by-id/dm-name-archvg-archvar /mnt/root/var mkdir -p /mnt/root/home mount /dev/disk/by-id/dm-name-archvg-archhome /mnt/root/home mkdir -p /mnt/root/mnt/vault mount /dev/disk/by-id/dm-name-archvg-vault /mnt/root/mnt/vault mkdir -p /mnt/root/mnt/crypt mount /dev/disk/by-id/dm-name-archvg-crypt /mnt/root/mnt/crypt swapon /dev/disk/by-id/dm-name-archvg-swap swapon lsblk # check everything Tip Control what you are mounting where with lsblk . You need do everything right before going chroot . Chrooting \u00b6 Chroot to the system: 1 arch-chroot /mnt/root /bin/fish System maps filesystem data to current system. Setup the bootloader \u00b6 On this system bootloader was this : 1 2 3 4 5 6 7 8 9 10 11 pacman -Sy grub lsblk grub-install --target = i386-pc /dev/sda ls /boot/grub/grub.cfg* diff /boot/grub/grub.cfg /boot/grub/grub.cfg.pacnew grub-mkconfig -o /boot/grub/grub.cfg Congratulations! \u00b6 Success After this you have fully restored system. So now you can reboot to your long awaited system and everything is going to run smooth.","title":"2017-05-04. Restore of deleted LVM (Advanced)"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#restore-of-deleted-lvm-advanced","text":"Note Case of bare static filesystems restoring is much more trivial. Look for \"TestDisc\" . Intro On the whole Internet there is no information on how to restore LVM, when no backup was present. Do backups. But sometimes someone may fall like I fell and need to restore LVM no matter what. I had backups of main information, but not full backup of the system (or at least GPT/MBR parts in this case). And I learned from that mistake. I decided to try to restore full system as a whole, to save effort and time. Because I thought it through and found almost universal solution to restore LVM. On multiple drives - you must do Analyze and Restore for all drives involved. I plan further to release in depth article on Backups. So one way or another. Boot-sector and partition table are deleted from drive. If only first sectors was erased, it is great. If you did classic: 1 2 3 dd if = /dev/zero of = /dev/ { h,p,s } d [ a..x ] bs = 512 count = 1 # Watch your paste to root prompt! # Like: # dd if=/dev/zero of=/dev/sda bs=512 count=1 # Watch-out this command! Instead of doing the opposite - the backups of first sectors.","title":"Restore of deleted LVM (Advanced)"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#backup-gpt","text":"1 sgdisk -b = /path/to/backup/drive-sgdisk.bak /path/to/device","title":"Backup GPT"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#backup-mbr","text":"1 2 3 dd if = /dev/ [ hps ] d [ a-x ] of = /backup/ [ hps ] d [ a-x ] bs = 512 count = 1 # Like: # dd if='/dev/sda of=/backup/'`date --iso`'. sda' bs=512 count=1","title":"Backup MBR"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#lvm","text":"LVM complicates task of recovery, because it is basically a dynamically shifting layer between physical drives partitions and filesystems. Deleting LVM info - you are basically lock your filesystems in a chaos box you can not penetrate. There is small info on Internet on how to resurrect your true HDD/SDD LVM friend(s) alive. But check it out anyway. We are going to do black magic. If you understand LVM in depth. LVM dynamically allocates physical space pieces (Physical extent (PE)). Physical extent (PE) The smallest size in the physical volume that can be assigned to a logical volume (default 4MiB)) This is one of main facts here. Second fact - like most disc solutions - LVM does not shrink by itself. We can do that process, if we want. But LVM, by itself, only expands. Third fact - LVM does not move Physical extents (PE) around, they are statically placed. They allocated from free pool, given to Logical volume (LV), written in it info and that is it. But now you see. LVM is a array of Physical extent (PE), and they was allocated and information stored on them is a complete chaos to us and to tools of recovery (they does not support LVM). That is why it seems impossible to resurrect for most people. But with dedication, way is described here.","title":"LVM"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#more-info-on-lvm","text":"LVM maps Physical volumes (PV), to Volume groups (VG). Physical volume (PV) Partition on hard disk (or even the disk itself or loopback file) on which you can have volume groups. It has a special header and is divided into physical extents. Think of physical volumes as big building blocks used to build your hard drive. Volume group (VG) Group of physical volumes used as a storage volume (as one disk). They contain logical volumes. Think of volume groups as hard drives. On Volume group (VG) you can describe a Logical volume (LV). Logical volume (LV) A \"virtual/logical partition\" that resides in a volume group and is composed of physical extents. Think of logical volumes as normal partitions. And when Logical volume is going to need to expand its physical space, it does this by getting Physical extent (PE) and mapping it to Logical extent (LE) units, that then LVM includes to Logical volume (LV). It can expand until reaching quota, or free Volume group space available. Logical extent (LE) units are additional abstraction for mapping LVM RAID PEs or PEs from different drives to single Logical volume.","title":"More info on LVM"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#explaining-the-idea","text":"Besides corner stones described in LVM , next piece also plays as important part. Not so known fact, LVM does a backups of it's work information. In /etc/lvm/backup it stores last backup. In /etc/lvm/archive lays a history of previous backup versions. But it is a backup inside the filesystem we trying to restore. Here comes a dirty magic I was talking about. If only we could revive LVM to any metadata state (even non-consistent), than almost certainly we can expect to get the hold of that /etc/lvm/backup . And it going to shine a lite on us. TestDisc can find LVM partition remains, but TestDisc doesn't support work with LVM. It only can say: it looks like some version of LVM table. So TestDisc can't somehow find for us, what version of LVM structure it restores (old or last one), and how consistent that LVM data is. So idea is. To revive the largest LVM TestDisc can find (probably the latest one, because LVM only expands most of the time and LVM PE data is static), and then chroot to that somewhat alive filesystem from working system and restore /etc/lvm/backup .","title":"Explaining the idea"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#process-of-restoring","text":"Tip For LVM on multiple drives - you must do Analyze and Restore for all drives involved. After that next step - recovery - is going to be successful. Connect the drive to working system or boot from Live image that is compatible with distribution that you restore. Example As I used Arch Linux on that machine, I used Arch based Antergos Live image. DD-t ISO on a flash drive. Antergos image has X11, Desktop Environment and Gparted prettiness. Install (update) lvm2 and testdisk . LVM2 as you guess provide LVM support. TestDisk is magical but not intuitive tool.","title":"Process of restoring"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#backup-full-device","text":"Backup at least what is on the drive: 1 ddrescue -v -f -n /path/to/drive /backup/path /backup/path/rescue.log Because the process is somewhat nontrivial, long and uses a hack in it. Note ddrescue output can't be archived on the fly . If you need compression - use filesystem level compression on the backup media.","title":"Backup full device"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#choose-right-partition-table","text":"Choose here right type of the partition. It is up to your research. Probably you have one of: [EFI GPT], [Mac ], [Intel ] . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - Hitachi HDS721010CLA330 Please select the partition table type, press Enter when done. [Intel ] Intel/PC partition >[EFI GPT] EFI GPT partition map (Mac i386, some x86_64...) [Humax ] Humax partition table [Mac ] Apple partition map [None ] Non partitioned media [Sun ] Sun Solaris partition [XBox ] XBox partition [Return ] Return to disk selection Hint: Intel partition table type has been detected. Note: Do NOT select 'None' for media with only a single partition. It's very rare for a disk to be 'Non-partitioned'.","title":"Choose right partition table"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#analyze-of-the-system-long-operation","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - Hitachi HDS721010CLA330 CHS 121601 255 63 - sector size=512 >[ Analyse ] Analyse current partition structure and search for lost partitions [ Advanced ] Filesystem Utils [ Geometry ] Change disk geometry [ Options ] Modify options [ MBR Code ] Write TestDisk MBR code to first sector [ Delete ] Delete all data in the partition table [ Quit ] Return to disk selection Note Correct disk geometry is required for a successful recovery. 'Analyse' process may give some warnings if it thinks the logical geometry is mismatched. 1 2 3 4 5 6 7 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - CHS 121601 255 63 Partition Start End Size in sectors >P Linux LVM 0 32 33 121601 90 25 1953523712 1 2 3 4 5 6 7 8 9 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - CHS 121601 255 63 Partition Start End Size in sectors 1 P Linux LVM 0 32 33 121601 90 25 1953523712 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 TestDisk 7.0, Data Recovery Utility, April 2015 Christophe GRENIER <grenier@cgsecurity.org> http://www.cgsecurity.org Disk /dev/sda - 1000 GB / 931 GiB - CHS 121601 255 63 Analyse cylinder 553/121600: 00% Linux LVM 0 32 33 121601 80 63 1953523120 Linux 0 65 2 13 0 51 204800 Linux 0 64 63 13 0 49 204800 Linux 0 64 63 13 0 49 204800 Linux 0 64 63 13 0 49 204800 Linux 0 64 63 13 0 49 204800 Linux 0 64 63 13 0 49 204800 Linux 13 0 52 3276 138 62 52428800 Stop","title":"Analyze of the system (long operation)"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#restoring-lvm-partition-with-testdisc","text":"After that scan TestDisc review several partitions to restore. One of which is LVM. And it says drive is to small (1T<1.3T or something like that) to reincarnate all that partitions. So you restore the LVM partition (the biggest). Warning At this stage partition and filesystem can be in inconsistent state. Minimize writing to system and proceed further. Restore from backup is going to get us consistent filesystem.","title":"Restoring LVM partition with TestDisc"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#rebooting-system","text":"To refresh drive boot-partition information - reboot after restoring.","title":"Rebooting system"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#checking-state","text":"After reboot while doing: 1 2 3 4 5 6 7 8 9 10 11 [antergos@ant-16.9 etc]$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0 0 931.5G 0 disk sda1 8:1 0 931.5G 0 part archvg-boot 254:0 0 100M 0 lvm archvg-archroot 254:1 0 25G 0 lvm /mnt/etc archvg-archvar 254:2 0 15G 0 lvm /run/media/antergos/244907d8-7c9f- archvg-swap 254:3 0 8G 0 lvm archvg-vault 254:4 0 800G 0 lvm archvg-crypt 254:5 0 1G 0 lvm archvg-archhome 254:6 0 20G 0 lvm /run/media/antergos/e2d59443-1e66- You began to see: 1 2 3 [antergos@ant-16.9 etc]$ sudo vgscan Reading volume groups from cache. Found volume group \"archvg\" using metadata type lvm2","title":"Checking state"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#restoring-from-backup","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 sudo -s # Change volume group attribute to activated vgchange -ay archvg mkdir /mnt/root/ # We need to mount only partition that has backup mount /dev/disk/by-id/archvg-root /mnt/root/ # Locate/print block device attributes blkid /dev/sda1 # /dev/sda1: UUID=\"7SFaGJ-LKnf-mlx7-m8dY-1bg4-epWM-09y8vR\" TYPE=\"LVM2_member\" # Investigate backup. Compare with information above cat /mnt/root/etc/lvm/backup/archvg # Restore volume group configuration vgcfgrestore -f /mnt/root/etc/lvm/backup/archvg archvg #Metadata Restored","title":"Restoring from backup"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#next-reboot","text":"Reboot. After that, if you try to boot to recovered system, - you can get error: 1234F: Because no bootloader was configured. Now we need boot from Live image once more.","title":"Next reboot"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#optional-make-partition-bootable","text":"If you was booting from LVM. Mark partition bootable (that flag was in old boot-sector, as you know old-one went away). sudo gparted . Right click on partition. Flags. \"boot\".","title":"(optional) Make partition bootable"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#mounting-everything-on-working-system-preparing-for-chroot","text":"Now you need by yourself mount all LVM volumes to single tree in /mnt/root, exactly how it was on that system. Because your LVM config is unique, as also mine, I can't give you literal instructions. Example I going to mount: 1 2 3 4 5 6 archvg-archroot /mnt/root/ archvg-boot /mnt/root/boot archvg-archvar /mnt/root/var archvg-archhome /mnt/root/home archvg-vault /mnt/root/mnt/vault archvg-crypt /mnt/root/mnt/crypt So I did: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 sudo -s mkdir -p /mnt/root/ mount /dev/disk/by-id/dm-name-archvg-archroot /mnt/root/ mkdir -p /mnt/root/boot mount /dev/disk/by-id/dm-name-archvg-boot /mnt/root/boot mkdir -p /mnt/root/var mount /dev/disk/by-id/dm-name-archvg-archvar /mnt/root/var mkdir -p /mnt/root/home mount /dev/disk/by-id/dm-name-archvg-archhome /mnt/root/home mkdir -p /mnt/root/mnt/vault mount /dev/disk/by-id/dm-name-archvg-vault /mnt/root/mnt/vault mkdir -p /mnt/root/mnt/crypt mount /dev/disk/by-id/dm-name-archvg-crypt /mnt/root/mnt/crypt swapon /dev/disk/by-id/dm-name-archvg-swap swapon lsblk # check everything Tip Control what you are mounting where with lsblk . You need do everything right before going chroot .","title":"Mounting everything on working system (preparing for chroot)"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#chrooting","text":"Chroot to the system: 1 arch-chroot /mnt/root /bin/fish System maps filesystem data to current system.","title":"Chrooting"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#setup-the-bootloader","text":"On this system bootloader was this : 1 2 3 4 5 6 7 8 9 10 11 pacman -Sy grub lsblk grub-install --target = i386-pc /dev/sda ls /boot/grub/grub.cfg* diff /boot/grub/grub.cfg /boot/grub/grub.cfg.pacnew grub-mkconfig -o /boot/grub/grub.cfg","title":"Setup the bootloader"},{"location":"2017-05-04.-Restore-of-deleted-LVM-(Advanced)/#congratulations","text":"Success After this you have fully restored system. So now you can reboot to your long awaited system and everything is going to run smooth.","title":"Congratulations!"},{"location":"about/","text":"About \u00b6 This is Anton Latukha personal website. IT specialist that devoted his life to computer stuff. Best skill in Linux systems and building any size of infrastructures on them. Architect, business minded, DevOps. Telecommunication postgraduate.","title":"About"},{"location":"about/#about","text":"This is Anton Latukha personal website. IT specialist that devoted his life to computer stuff. Best skill in Linux systems and building any size of infrastructures on them. Architect, business minded, DevOps. Telecommunication postgraduate.","title":"About"},{"location":"bio/","text":"GitHub | Old GitHub | Twitter | LinkedIn | CV Biography \u00b6 I am a versatile guy, that live 27/7 in Linux and Open Source for last 10 years. Good system administrator and naturally grown to achieve DevOps levels want to move beyond. I don\u2019t know how guys today can be called DevOps, that not having at least great knowledge in Linux/OS systems. While their work is automating those systems. Thou, if look at reality, volume of skills I have and knowledge, depth and scale of thinking, some business experience and thinking: must mean I am an architect guy. The person, who understands all fields of technology and was in, have enough experience and knowledge in all directions, that I can reason, be on the same page with programmers in all languages (I programmed in all levels of languages (from Assembly, to C to C++, to Python, JS, Node.JS to Lisp to Haskell)), admins, db-admins, web-developers, hardware engineers, field-support guys, and more-over businessmen and entrepreneurs. With businessmen we discuss approaches and view, and make solutions even better for them. And in background, most times, I know \u2013 that implementations take less time, and have a less cost. I help businessmen as good as I can. We discuss and do solutions more suitable, with less cost, more robust and more maintainable, and suited for future of their business and it's growth. IT is a strange world, where it is possible in reality. Using masterful approach in several dimensions (technical, management, psychological, social). So I look for great reality-driven clients, really, because that is when we both have best results. I feel accomplished, entrepreneur \u2013 happy, and benefits from results. And I like to think they also feel accomplished, and I made valuable fro them part in their business, that get them faster to their dreams becoming reality. I have great graduate and postgraduate telecommunication education while also had CCNA in Cisco area, love it, and taught it also. I center to be performant. And build great quality systems. Automation/virtualization&containerization practice. Also I had Microsoft administration history and a touch of love between IBM. Skills \u00b6 Know Linux really good. Can create under any distribution. Underlying innerworks, technologies of Linux and Open Source technologies. How they work. What ecosystem have and what it doesn't have. Sometimes proprietary products is a real way. I have experience working with: OS Linux \u00b6 Debian Ubuntu (from 7.04 to today) CentOS Fedora (My first Linux was Red Hat Linux 8) Arch Linux Alpine Linux (deure Docker standard) Can create, work efficiently in any other Linux environment. For myself I use Linux for everything. Can cover all my needs. I eat my own food 24/7. In business used *nix in a hosting provider and as system administrator of a systems integrator company for one and a half year. In some side projects, some of them on Upwork. And projects for local business customers. For servers I use suited to task/requirements distro. For myself I use Arch Linux, that enables me real great knowledge and understanding of depth and all bleeding edge technologies. Have some experience in more exotic OS \u00b6 IBM AIX systems. 6.1 and 7.1. I got IBM internship, but sadly couldn't be accepted by IBM because University document reasons (finished my degree). IBM staff, like a great company do, in apology gave me 3 basic courses of IBM AIX systems. FreeBSD Red Hat OS Windows \u00b6 Starting from MS DOS 3.0, MS DOS 5.0, Windows 1.0, 3.11, 95, 95 OSR2, 98, 98 SP1, SP2, Windows NT, Windows 2000, Windows 2003 Server, Windows 2008 Server, Windows 2012 Server. I was administrator of system integration company SI BIS, infrastructure was on Microsoft products, this is where my point of Windows 2008 Server, Windows 2012 Server from. Main technologies I have experience in \u00b6 Init subsystems \u00b6 Systemd SysV Upstart Configuration/Code Management \u00b6 Git Ansible SaltStack Puppet Was using SaltStack, moved to Ansible not so long ago. Virtualization & containerization \u00b6 Virtualization and containerization theory Docker (Compose, Machine. Swarm, private repositories) Kubernetes KVM VMWare solutions line with ESXi (5.0-5.2) OpenVZ HyperV LXC Have a basics and continue learning Kubernetes at the moment. Docker is my passion \u00b6 Databases \u00b6 Database theory overall. Structure, keys, normalization, queries, transactions, users, rights, boolean algebra. SQL language MySQL MariaDB PostgresSQL InfluxDB (special DB for time-series data) Microsoft SQL Microsoft Access Briefly touched NoSQL, MLP databases. Couchbase and MongoDB. Monitoring \u00b6 Zabbix (and it's theory of items, triggers, etc., low level scanning) Grafana InfluxDB netdata Graphite SNMP Windows SNMP provider Windows WMI Windows Perf Microsoft Powershell Windows sysinfo Windows logging and troubleshoot experience Linux Filesystem Hierarchy Linux logging (Syslog, Journald) Linux Finger S.M.A.R.T. (SmartMonTools) Hardware sensors information (lm_sensors and such) Zabbix active agents Backup solutions \u00b6 Bacula BareOS Rsync Backup to Cloud storage via WebDAV or CLI Filesystem \u00b6 ZFS Programming & scripting languages experience \u00b6 Haskell Go Node.JS (+ Jade, Express.JS) JavaScript (+ jQuerry, CSS, HTML5) Bash, Bourne Shell, Dash, Fish, ZSH, Bat files Python (basics) C C++ (basics) QT, QML, QTQuick Assembler (TASM) BASIC (ZX Spectrum, my first PC) Visual Basic Pascal Lisp C#, .Net I had a mind inclination to be a mathematician or programmer, but as teen chose not to be. But inclination and experience serve me very well. I can pick up something hard, like Haskell or Assembler, Lisp or whatever and run with it. Use of libraries, frameworks boosts that. VoIP \u00b6 Asterisk Network education help me a lot here also CI/CD \u00b6 Have basic experience with deploying and using Jenkins building pipelines and applying unit tests. As I know Docker really great combined with Linux knowledge and programming knowledge, I expand in CI progress fast. Network OS \u00b6 Cisco IOS 12.4T, and 15M Cisco Catalyst MikroTik RouterBOARD Had brief experience with Huawei VRP to understand how much it is rewritten IOS (but all names are changed). Some technologies also. I know Telecommunications, if needed for work, from top to bottom \u00b6 I have higher degree at Telecommunications. Master and underway to Postgraduate degree. Bachelor degree was more software centered (STP modification for PON networks). Master degree more hardware centered (WDM in PON networks). From my interest to hard subject solidly I know software, hardware, and underlying Telecommunication theory, Calculus, Probability theory, Classical electrodynamics that was strong points at my University. I get official CCNA education. And love Cisco tech and console. But honestly don't get appropriate certification, and don't saw strong point. On my nevertheless good CCNA knowledge created with team networking lab at university. With complex infrastructure. Some time after that, my scientific director got contract to conduct courses. I wrote part of the materials, and was main practical knowledge lecturer and held practices for business courses. Courses was created specifically for Ukrainian national broadcasting company and consisted of questions they wanted. From basics of networking, ISO levels 1-3, IP/TCP stack, Cisco and MikroTik basics, basics of switching, VLANs, basic routing & protocols, to basics of encryption, and VPN tunneling, client and site-to-site. This all I explained them in detail. And there was 6 waves of courses. That is why I have knowledge of networks on something more than Cisco CCNA level because of my Networking education & CCNA courses & some job and science experience of additional and essential topics like multi-area OSPF, MPLS, optical networks. Contributions \u00b6 ArchWiki - one of the best Linux information resources (my old and current profiles). OpenStreetMap: profile . Was involved on improving and bug reporting to projects of: KDE community, Mozilla Corporation, SaltStack, and number of others. Reporting to various distributions. Number of Docker repositories. Also bits and pieces of improvements to projects during my work process. Proponent both of open source & proprietary projects and solutions. Social skills \u00b6 I love smart people I love to work in team if personals are appreciated I love to share thoughts, knowledge and view, it is more fun and productive I love when everyone know their zone of responsibility. I want both my clients, friends and me be joyful and effective in live.","title":"Biography"},{"location":"bio/#biography","text":"I am a versatile guy, that live 27/7 in Linux and Open Source for last 10 years. Good system administrator and naturally grown to achieve DevOps levels want to move beyond. I don\u2019t know how guys today can be called DevOps, that not having at least great knowledge in Linux/OS systems. While their work is automating those systems. Thou, if look at reality, volume of skills I have and knowledge, depth and scale of thinking, some business experience and thinking: must mean I am an architect guy. The person, who understands all fields of technology and was in, have enough experience and knowledge in all directions, that I can reason, be on the same page with programmers in all languages (I programmed in all levels of languages (from Assembly, to C to C++, to Python, JS, Node.JS to Lisp to Haskell)), admins, db-admins, web-developers, hardware engineers, field-support guys, and more-over businessmen and entrepreneurs. With businessmen we discuss approaches and view, and make solutions even better for them. And in background, most times, I know \u2013 that implementations take less time, and have a less cost. I help businessmen as good as I can. We discuss and do solutions more suitable, with less cost, more robust and more maintainable, and suited for future of their business and it's growth. IT is a strange world, where it is possible in reality. Using masterful approach in several dimensions (technical, management, psychological, social). So I look for great reality-driven clients, really, because that is when we both have best results. I feel accomplished, entrepreneur \u2013 happy, and benefits from results. And I like to think they also feel accomplished, and I made valuable fro them part in their business, that get them faster to their dreams becoming reality. I have great graduate and postgraduate telecommunication education while also had CCNA in Cisco area, love it, and taught it also. I center to be performant. And build great quality systems. Automation/virtualization&containerization practice. Also I had Microsoft administration history and a touch of love between IBM.","title":"Biography"},{"location":"bio/#skills","text":"Know Linux really good. Can create under any distribution. Underlying innerworks, technologies of Linux and Open Source technologies. How they work. What ecosystem have and what it doesn't have. Sometimes proprietary products is a real way. I have experience working with:","title":"Skills"},{"location":"bio/#os-linux","text":"Debian Ubuntu (from 7.04 to today) CentOS Fedora (My first Linux was Red Hat Linux 8) Arch Linux Alpine Linux (deure Docker standard) Can create, work efficiently in any other Linux environment. For myself I use Linux for everything. Can cover all my needs. I eat my own food 24/7. In business used *nix in a hosting provider and as system administrator of a systems integrator company for one and a half year. In some side projects, some of them on Upwork. And projects for local business customers. For servers I use suited to task/requirements distro. For myself I use Arch Linux, that enables me real great knowledge and understanding of depth and all bleeding edge technologies.","title":"OS Linux"},{"location":"bio/#have-some-experience-in-more-exotic-os","text":"IBM AIX systems. 6.1 and 7.1. I got IBM internship, but sadly couldn't be accepted by IBM because University document reasons (finished my degree). IBM staff, like a great company do, in apology gave me 3 basic courses of IBM AIX systems. FreeBSD Red Hat","title":"Have some experience in more exotic OS"},{"location":"bio/#os-windows","text":"Starting from MS DOS 3.0, MS DOS 5.0, Windows 1.0, 3.11, 95, 95 OSR2, 98, 98 SP1, SP2, Windows NT, Windows 2000, Windows 2003 Server, Windows 2008 Server, Windows 2012 Server. I was administrator of system integration company SI BIS, infrastructure was on Microsoft products, this is where my point of Windows 2008 Server, Windows 2012 Server from.","title":"OS Windows"},{"location":"bio/#main-technologies-i-have-experience-in","text":"","title":"Main technologies I have experience in"},{"location":"bio/#init-subsystems","text":"Systemd SysV Upstart","title":"Init subsystems"},{"location":"bio/#configurationcode-management","text":"Git Ansible SaltStack Puppet Was using SaltStack, moved to Ansible not so long ago.","title":"Configuration/Code Management"},{"location":"bio/#virtualization-containerization","text":"Virtualization and containerization theory Docker (Compose, Machine. Swarm, private repositories) Kubernetes KVM VMWare solutions line with ESXi (5.0-5.2) OpenVZ HyperV LXC Have a basics and continue learning Kubernetes at the moment.","title":"Virtualization &amp; containerization"},{"location":"bio/#docker-is-my-passion","text":"","title":"Docker is my passion"},{"location":"bio/#databases","text":"Database theory overall. Structure, keys, normalization, queries, transactions, users, rights, boolean algebra. SQL language MySQL MariaDB PostgresSQL InfluxDB (special DB for time-series data) Microsoft SQL Microsoft Access Briefly touched NoSQL, MLP databases. Couchbase and MongoDB.","title":"Databases"},{"location":"bio/#monitoring","text":"Zabbix (and it's theory of items, triggers, etc., low level scanning) Grafana InfluxDB netdata Graphite SNMP Windows SNMP provider Windows WMI Windows Perf Microsoft Powershell Windows sysinfo Windows logging and troubleshoot experience Linux Filesystem Hierarchy Linux logging (Syslog, Journald) Linux Finger S.M.A.R.T. (SmartMonTools) Hardware sensors information (lm_sensors and such) Zabbix active agents","title":"Monitoring"},{"location":"bio/#backup-solutions","text":"Bacula BareOS Rsync Backup to Cloud storage via WebDAV or CLI","title":"Backup solutions"},{"location":"bio/#filesystem","text":"ZFS","title":"Filesystem"},{"location":"bio/#programming-scripting-languages-experience","text":"Haskell Go Node.JS (+ Jade, Express.JS) JavaScript (+ jQuerry, CSS, HTML5) Bash, Bourne Shell, Dash, Fish, ZSH, Bat files Python (basics) C C++ (basics) QT, QML, QTQuick Assembler (TASM) BASIC (ZX Spectrum, my first PC) Visual Basic Pascal Lisp C#, .Net I had a mind inclination to be a mathematician or programmer, but as teen chose not to be. But inclination and experience serve me very well. I can pick up something hard, like Haskell or Assembler, Lisp or whatever and run with it. Use of libraries, frameworks boosts that.","title":"Programming &amp; scripting languages experience"},{"location":"bio/#voip","text":"Asterisk Network education help me a lot here also","title":"VoIP"},{"location":"bio/#cicd","text":"Have basic experience with deploying and using Jenkins building pipelines and applying unit tests. As I know Docker really great combined with Linux knowledge and programming knowledge, I expand in CI progress fast.","title":"CI/CD"},{"location":"bio/#network-os","text":"Cisco IOS 12.4T, and 15M Cisco Catalyst MikroTik RouterBOARD Had brief experience with Huawei VRP to understand how much it is rewritten IOS (but all names are changed). Some technologies also.","title":"Network OS"},{"location":"bio/#i-know-telecommunications-if-needed-for-work-from-top-to-bottom","text":"I have higher degree at Telecommunications. Master and underway to Postgraduate degree. Bachelor degree was more software centered (STP modification for PON networks). Master degree more hardware centered (WDM in PON networks). From my interest to hard subject solidly I know software, hardware, and underlying Telecommunication theory, Calculus, Probability theory, Classical electrodynamics that was strong points at my University. I get official CCNA education. And love Cisco tech and console. But honestly don't get appropriate certification, and don't saw strong point. On my nevertheless good CCNA knowledge created with team networking lab at university. With complex infrastructure. Some time after that, my scientific director got contract to conduct courses. I wrote part of the materials, and was main practical knowledge lecturer and held practices for business courses. Courses was created specifically for Ukrainian national broadcasting company and consisted of questions they wanted. From basics of networking, ISO levels 1-3, IP/TCP stack, Cisco and MikroTik basics, basics of switching, VLANs, basic routing & protocols, to basics of encryption, and VPN tunneling, client and site-to-site. This all I explained them in detail. And there was 6 waves of courses. That is why I have knowledge of networks on something more than Cisco CCNA level because of my Networking education & CCNA courses & some job and science experience of additional and essential topics like multi-area OSPF, MPLS, optical networks.","title":"I know Telecommunications, if needed for work, from top to bottom"},{"location":"bio/#contributions","text":"ArchWiki - one of the best Linux information resources (my old and current profiles). OpenStreetMap: profile . Was involved on improving and bug reporting to projects of: KDE community, Mozilla Corporation, SaltStack, and number of others. Reporting to various distributions. Number of Docker repositories. Also bits and pieces of improvements to projects during my work process. Proponent both of open source & proprietary projects and solutions.","title":"Contributions"},{"location":"bio/#social-skills","text":"I love smart people I love to work in team if personals are appreciated I love to share thoughts, knowledge and view, it is more fun and productive I love when everyone know their zone of responsibility. I want both my clients, friends and me be joyful and effective in live.","title":"Social skills"}]}